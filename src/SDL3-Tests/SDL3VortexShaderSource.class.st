"
Post-processing fragment shader that twists the texture around the center of the screen. The further from the center, the more it twists.

(Created with help of Gemini)
"
Class {
	#name : 'SDL3VortexShaderSource',
	#superclass : 'SDL3ShaderSource',
	#category : 'SDL3-Tests-Shaders',
	#package : 'SDL3-Tests',
	#tag : 'Shaders'
}

{ #category : 'accessing' }
SDL3VortexShaderSource class >> hlslSource [
	<script: 'self generateEmbeddedSourcesFromHLSL'>

	^ '
Texture2D texture : register(t0, space2);
SamplerState textureSampler : register(s0, space2);

cbuffer Params : register(b0, space3)
{
    float Time;
    float2 Resolution;
}

static const float TwistAmount = 5.0; // Try 5.0 to 10.0

struct PSInput
{
    float4 color : COLOR0;
    float2 uv : TEXCOORD0;
};

float4 main(PSInput input) : SV_Target
{
    // Center the coordinates (-0.5 to 0.5)
    float2 centeredUV = input.uv - 0.5;
    
    // Calculate distance from center
    float dist = length(centeredUV);
    
    // Calculate rotation angle based on distance and Time
    // The distortion decreases at the center (dist) to preserve the focal point
    float angle = (TwistAmount * dist) + Time;
    
    // precise sine/cosine for rotation
    float s, c;
    sincos(angle, s, c);
    
    // Rotate the UV coordinates
    float2 rotatedUV = float2(
        centeredUV.x * c - centeredUV.y * s,
        centeredUV.x * s + centeredUV.y * c
    );
    
    // Un-center the coordinates back to 0.0 to 1.0 range
    rotatedUV += 0.5;
    
    // Sample texture
    float4 color = texture.Sample(textureSampler, rotatedUV) * input.color;
    
    return float4(color.rgb, 1.0);
}
'
]

{ #category : 'accessing' }
SDL3VortexShaderSource class >> sourceCompiledAsDXIL [
	"This method was generated from #hlslSource"

	^ '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' base64Decoded
]

{ #category : 'accessing' }
SDL3VortexShaderSource class >> sourceCompiledAsMSL [
	"This method was generated from #hlslSource"

	^ 'I2luY2x1ZGUgPG1ldGFsX3N0ZGxpYj4KI2luY2x1ZGUgPHNpbWQvc2ltZC5oPgoKdXNpbmcgbmFtZXNwYWNlIG1ldGFsOwoKc3RydWN0IHR5cGVfUGFyYW1zCnsKICAgIGZsb2F0IFRpbWU7CiAgICBwYWNrZWRfZmxvYXQyIFJlc29sdXRpb247Cn07CgpzdHJ1Y3QgbWFpbjBfb3V0CnsKICAgIGZsb2F0NCBvdXRfdmFyX1NWX1RhcmdldCBbW2NvbG9yKDApXV07Cn07CgpzdHJ1Y3QgbWFpbjBfaW4KewogICAgZmxvYXQ0IGluX3Zhcl9DT0xPUjAgW1t1c2VyKGxvY24wKV1dOwogICAgZmxvYXQyIGluX3Zhcl9URVhDT09SRDAgW1t1c2VyKGxvY24xKV1dOwp9OwoKZnJhZ21lbnQgbWFpbjBfb3V0IG1haW4wKG1haW4wX2luIGluIFtbc3RhZ2VfaW5dXSwgY29uc3RhbnQgdHlwZV9QYXJhbXMmIFBhcmFtcyBbW2J1ZmZlcigwKV1dLCB0ZXh0dXJlMmQ8ZmxvYXQ+IF90ZXh0dXJlIFtbdGV4dHVyZSgwKV1dLCBzYW1wbGVyIHRleHR1cmVTYW1wbGVyIFtbc2FtcGxlcigwKV1dKQp7CiAgICBtYWluMF9vdXQgb3V0ID0ge307CiAgICBmbG9hdDIgXzM0ID0gaW4uaW5fdmFyX1RFWENPT1JEMCAtIGZsb2F0MigwLjUpOwogICAgZmxvYXQgXzM5ID0gKDUuMCAqIGxlbmd0aChfMzQpKSArIFBhcmFtcy5UaW1lOwogICAgZmxvYXQgXzQwID0gc2luKF8zOSk7CiAgICBmbG9hdCBfNDEgPSBjb3MoXzM5KTsKICAgIGZsb2F0IF80MiA9IF8zNC54OwogICAgZmxvYXQgXzQ0ID0gXzM0Lnk7CiAgICBvdXQub3V0X3Zhcl9TVl9UYXJnZXQgPSBmbG9hdDQoKF90ZXh0dXJlLnNhbXBsZSh0ZXh0dXJlU2FtcGxlciwgKGZsb2F0MigoXzQyICogXzQxKSAtIChfNDQgKiBfNDApLCAoXzQyICogXzQwKSArIChfNDQgKiBfNDEpKSArIGZsb2F0MigwLjUpKSkgKiBpbi5pbl92YXJfQ09MT1IwKS54eXosIDEuMCk7CiAgICByZXR1cm4gb3V0Owp9Cgo=' base64Decoded
]

{ #category : 'accessing' }
SDL3VortexShaderSource class >> sourceCompiledAsSPV [
	"This method was generated from #hlslSource"

	^ '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' base64Decoded
]
