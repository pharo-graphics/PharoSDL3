Class {
	#name : 'SDL3ShaderSource',
	#superclass : 'Object',
	#instVars : [
		'source',
		'format'
	],
	#classVars : [
		'CRTmsl'
	],
	#category : 'SDL3-Tests-Shaders',
	#package : 'SDL3-Tests',
	#tag : 'Shaders'
}

{ #category : 'examples' }
SDL3ShaderSource class >> crtMsl [
	"Answer CRT effect shader, in MSL format.
	Extracted from SDL/test/testgpurender_effects_CRT.frag.msl.h"

	^ CRTmsl
]

{ #category : 'examples' }
SDL3ShaderSource class >> initialize [

	"CRT effect shader, in MSL format. Extracted from SDL/test/testgpurender_effects_CRT.frag.msl.h"
	CRTmsl :=
		self new
			format: SDL3GPUShaderFormat msl;
			sourceByteArray: #[
	  16r23 16r69 16r6e 16r63 16r6c 16r75 16r64 16r65 16r20 16r3c 16r6d 16r65
	  16r74 16r61 16r6c 16r5f 16r73 16r74 16r64 16r6c 16r69 16r62 16r3e 16r0a
	  16r23 16r69 16r6e 16r63 16r6c 16r75 16r64 16r65 16r20 16r3c 16r73 16r69
	  16r6d 16r64 16r2f 16r73 16r69 16r6d 16r64 16r2e 16r68 16r3e 16r0a 16r0a
	  16r75 16r73 16r69 16r6e 16r67 16r20 16r6e 16r61 16r6d 16r65 16r73 16r70
	  16r61 16r63 16r65 16r20 16r6d 16r65 16r74 16r61 16r6c 16r3b 16r0a 16r0a
	  16r73 16r74 16r72 16r75 16r63 16r74 16r20 16r74 16r79 16r70 16r65 16r5f
	  16r43 16r6f 16r6e 16r74 16r65 16r78 16r74 16r0a 16r7b 16r0a 16r20 16r20
	  16r20 16r20 16r66 16r6c 16r6f 16r61 16r74 16r32 16r20 16r72 16r65 16r73
	  16r6f 16r6c 16r75 16r74 16r69 16r6f 16r6e 16r3b 16r0a 16r7d 16r3b 16r0a
	  16r0a 16r73 16r74 16r72 16r75 16r63 16r74 16r20 16r6d 16r61 16r69 16r6e
	  16r30 16r5f 16r6f 16r75 16r74 16r0a 16r7b 16r0a 16r20 16r20 16r20 16r20
	  16r66 16r6c 16r6f 16r61 16r74 16r34 16r20 16r6f 16r75 16r74 16r5f 16r76
	  16r61 16r72 16r5f 16r53 16r56 16r5f 16r54 16r61 16r72 16r67 16r65 16r74
	  16r20 16r5b 16r5b 16r63 16r6f 16r6c 16r6f 16r72 16r28 16r30 16r29 16r5d
	  16r5d 16r3b 16r0a 16r7d 16r3b 16r0a 16r0a 16r73 16r74 16r72 16r75 16r63
	  16r74 16r20 16r6d 16r61 16r69 16r6e 16r30 16r5f 16r69 16r6e 16r0a 16r7b
	  16r0a 16r20 16r20 16r20 16r20 16r66 16r6c 16r6f 16r61 16r74 16r34 16r20
	  16r69 16r6e 16r5f 16r76 16r61 16r72 16r5f 16r43 16r4f 16r4c 16r4f 16r52
	  16r30 16r20 16r5b 16r5b 16r75 16r73 16r65 16r72 16r28 16r6c 16r6f 16r63
	  16r6e 16r30 16r29 16r5d 16r5d 16r3b 16r0a 16r20 16r20 16r20 16r20 16r66
	  16r6c 16r6f 16r61 16r74 16r32 16r20 16r69 16r6e 16r5f 16r76 16r61 16r72
	  16r5f 16r54 16r45 16r58 16r43 16r4f 16r4f 16r52 16r44 16r30 16r20 16r5b
	  16r5b 16r75 16r73 16r65 16r72 16r28 16r6c 16r6f 16r63 16r6e 16r31 16r29
	  16r5d 16r5d 16r3b 16r0a 16r7d 16r3b 16r0a 16r0a 16r66 16r72 16r61 16r67
	  16r6d 16r65 16r6e 16r74 16r20 16r6d 16r61 16r69 16r6e 16r30 16r5f 16r6f
	  16r75 16r74 16r20 16r6d 16r61 16r69 16r6e 16r30 16r28 16r6d 16r61 16r69
	  16r6e 16r30 16r5f 16r69 16r6e 16r20 16r69 16r6e 16r20 16r5b 16r5b 16r73
	  16r74 16r61 16r67 16r65 16r5f 16r69 16r6e 16r5d 16r5d 16r2c 16r20 16r63
	  16r6f 16r6e 16r73 16r74 16r61 16r6e 16r74 16r20 16r74 16r79 16r70 16r65
	  16r5f 16r43 16r6f 16r6e 16r74 16r65 16r78 16r74 16r26 16r20 16r43 16r6f
	  16r6e 16r74 16r65 16r78 16r74 16r20 16r5b 16r5b 16r62 16r75 16r66 16r66
	  16r65 16r72 16r28 16r30 16r29 16r5d 16r5d 16r2c 16r20 16r74 16r65 16r78
	  16r74 16r75 16r72 16r65 16r32 16r64 16r3c 16r66 16r6c 16r6f 16r61 16r74
	  16r3e 16r20 16r75 16r5f 16r74 16r65 16r78 16r74 16r75 16r72 16r65 16r20
	  16r5b 16r5b 16r74 16r65 16r78 16r74 16r75 16r72 16r65 16r28 16r30 16r29
	  16r5d 16r5d 16r2c 16r20 16r73 16r61 16r6d 16r70 16r6c 16r65 16r72 16r20
	  16r75 16r5f 16r73 16r61 16r6d 16r70 16r6c 16r65 16r72 16r20 16r5b 16r5b
	  16r73 16r61 16r6d 16r70 16r6c 16r65 16r72 16r28 16r30 16r29 16r5d 16r5d
	  16r29 16r0a 16r7b 16r0a 16r20 16r20 16r20 16r20 16r6d 16r61 16r69 16r6e
	  16r30 16r5f 16r6f 16r75 16r74 16r20 16r6f 16r75 16r74 16r20 16r3d 16r20
	  16r7b 16r7d 16r3b 16r0a 16r20 16r20 16r20 16r20 16r66 16r6c 16r6f 16r61
	  16r74 16r32 16r20 16r5f 16r34 16r39 16r20 16r3d 16r20 16r69 16r6e 16r2e
	  16r69 16r6e 16r5f 16r76 16r61 16r72 16r5f 16r54 16r45 16r58 16r43 16r4f
	  16r4f 16r52 16r44 16r30 16r20 16r2d 16r20 16r66 16r6c 16r6f 16r61 16r74
	  16r32 16r28 16r30 16r2e 16r35 16r29 16r3b 16r0a 16r20 16r20 16r20 16r20
	  16r66 16r6c 16r6f 16r61 16r74 16r32 16r20 16r5f 16r35 16r33 16r20 16r3d
	  16r20 16r69 16r6e 16r2e 16r69 16r6e 16r5f 16r76 16r61 16r72 16r5f 16r54
	  16r45 16r58 16r43 16r4f 16r4f 16r52 16r44 16r30 16r20 16r2b 16r20 16r28
	  16r5f 16r34 16r39 16r20 16r2a 16r20 16r28 16r64 16r6f 16r74 16r28 16r5f
	  16r34 16r39 16r2c 16r20 16r5f 16r34 16r39 16r29 16r20 16r2a 16r20 16r30
	  16r2e 16r30 16r35 16r30 16r30 16r30 16r30 16r30 16r30 16r30 16r37 16r34
	  16r35 16r30 16r35 16r38 16r30 16r35 16r39 16r36 16r39 16r32 16r33 16r38
	  16r32 16r38 16r31 16r32 16r35 16r29 16r29 16r3b 16r0a 16r20 16r20 16r20
	  16r20 16r66 16r6c 16r6f 16r61 16r74 16r34 16r20 16r5f 16r37 16r35 16r20
	  16r3d 16r20 16r75 16r5f 16r74 16r65 16r78 16r74 16r75 16r72 16r65 16r2e
	  16r73 16r61 16r6d 16r70 16r6c 16r65 16r28 16r75 16r5f 16r73 16r61 16r6d
	  16r70 16r6c 16r65 16r72 16r2c 16r20 16r69 16r6e 16r2e 16r69 16r6e 16r5f
	  16r76 16r61 16r72 16r5f 16r54 16r45 16r58 16r43 16r4f 16r4f 16r52 16r44
	  16r30 16r29 16r20 16r2a 16r20 16r69 16r6e 16r2e 16r69 16r6e 16r5f 16r76
	  16r61 16r72 16r5f 16r43 16r4f 16r4c 16r4f 16r52 16r30 16r3b 16r0a 16r20
	  16r20 16r20 16r20 16r66 16r6c 16r6f 16r61 16r74 16r32 16r20 16r5f 16r38
	  16r30 16r20 16r3d 16r20 16r5f 16r35 16r33 16r20 16r2a 16r20 16r28 16r66
	  16r6c 16r6f 16r61 16r74 16r32 16r28 16r31 16r2e 16r30 16r29 16r20 16r2d
	  16r20 16r5f 16r35 16r33 16r29 16r3b 16r0a 16r20 16r20 16r20 16r20 16r66
	  16r6c 16r6f 16r61 16r74 16r33 16r20 16r5f 16r38 16r38 16r20 16r3d 16r20
	  16r28 16r5f 16r37 16r35 16r2e 16r78 16r79 16r7a 16r20 16r2a 16r20 16r28
	  16r6d 16r69 16r78 16r28 16r31 16r2e 16r30 16r2c 16r20 16r28 16r73 16r69
	  16r6e 16r28 16r28 16r5f 16r35 16r33 16r2e 16r79 16r20 16r2a 16r20 16r43
	  16r6f 16r6e 16r74 16r65 16r78 16r74 16r2e 16r72 16r65 16r73 16r6f 16r6c
	  16r75 16r74 16r69 16r6f 16r6e 16r2e 16r79 16r29 16r20 16r2a 16r20 16r33
	  16r2e 16r31 16r34 16r31 16r35 16r39 16r32 16r37 16r34 16r31 16r30 16r31
	  16r32 16r35 16r37 16r33 16r32 16r34 16r32 16r31 16r38 16r37 16r35 16r29
	  16r20 16r2a 16r20 16r30 16r2e 16r35 16r29 16r20 16r2b 16r20 16r30 16r2e
	  16r35 16r2c 16r20 16r30 16r2e 16r32 16r35 16r29 16r20 16r2a 16r20 16r6d
	  16r69 16r78 16r28 16r31 16r2e 16r30 16r2c 16r20 16r28 16r66 16r6d 16r6f
	  16r64 16r28 16r5f 16r35 16r33 16r2e 16r78 16r20 16r2a 16r20 16r43 16r6f
	  16r6e 16r74 16r65 16r78 16r74 16r2e 16r72 16r65 16r73 16r6f 16r6c 16r75
	  16r74 16r69 16r6f 16r6e 16r2e 16r78 16r2c 16r20 16r33 16r2e 16r30 16r29
	  16r20 16r3c 16r20 16r31 16r2e 16r35 16r29 16r20 16r3f 16r20 16r30 16r2e
	  16r39 16r34 16r39 16r39 16r39 16r39 16r39 16r38 16r38 16r30 16r37 16r39
	  16r30 16r37 16r31 16r30 16r34 16r34 16r39 16r32 16r31 16r38 16r37 16r35
	  16r20 16r3a 16r20 16r31 16r2e 16r30 16r34 16r39 16r39 16r39 16r39 16r39
	  16r35 16r32 16r33 16r31 16r36 16r32 16r38 16r34 16r31 16r37 16r39 16r36
	  16r38 16r37 16r35 16r2c 16r20 16r30 16r2e 16r30 16r32 16r35 16r30 16r30
	  16r30 16r30 16r30 16r30 16r33 16r37 16r32 16r35 16r32 16r39 16r30 16r32
	  16r39 16r38 16r34 16r36 16r31 16r39 16r31 16r34 16r30 16r36 16r32 16r35
	  16r29 16r29 16r29 16r2e 16r78 16r79 16r7a 16r20 16r2a 16r20 16r28 16r6d
	  16r69 16r78 16r28 16r31 16r2e 16r30 16r2c 16r20 16r28 16r5f 16r38 16r30
	  16r2e 16r78 16r20 16r2a 16r20 16r5f 16r38 16r30 16r2e 16r79 16r29 16r20
	  16r2a 16r20 16r31 16r35 16r2e 16r30 16r2c 16r20 16r30 16r2e 16r33 16r34
	  16r39 16r39 16r39 16r39 16r39 16r39 16r34 16r30 16r33 16r39 16r35 16r33
	  16r35 16r35 16r32 16r32 16r34 16r36 16r30 16r39 16r33 16r37 16r35 16r29
	  16r20 16r2a 16r20 16r31 16r2e 16r32 16r30 16r30 16r30 16r30 16r30 16r30
	  16r34 16r37 16r36 16r38 16r33 16r37 16r31 16r35 16r38 16r32 16r30 16r33
	  16r31 16r32 16r35 16r29 16r3b 16r0a 16r20 16r20 16r20 16r20 16r6f 16r75
	  16r74 16r2e 16r6f 16r75 16r74 16r5f 16r76 16r61 16r72 16r5f 16r53 16r56
	  16r5f 16r54 16r61 16r72 16r67 16r65 16r74 16r20 16r3d 16r20 16r66 16r6c
	  16r6f 16r61 16r74 16r34 16r28 16r5f 16r38 16r38 16r2e 16r78 16r2c 16r20
	  16r5f 16r38 16r38 16r2e 16r79 16r2c 16r20 16r5f 16r38 16r38 16r2e 16r7a
	  16r2c 16r20 16r5f 16r37 16r35 16r2e 16r77 16r29 16r3b 16r0a 16r20 16r20
	  16r20 16r20 16r72 16r65 16r74 16r75 16r72 16r6e 16r20 16r6f 16r75 16r74
	  16r3b 16r0a 16r7d 16r0a 16r0a ];
			yourself
]

{ #category : 'accessing' }
SDL3ShaderSource >> format [

	^ format
]

{ #category : 'accessing' }
SDL3ShaderSource >> format: anObject [

	format := anObject
]

{ #category : 'accessing' }
SDL3ShaderSource >> source [

	^ source
]

{ #category : 'accessing' }
SDL3ShaderSource >> source: anObject [

	source := anObject
]

{ #category : 'accessing' }
SDL3ShaderSource >> sourceByteArray: aByteArray [

	source :=
		FFIExternalArray
			externalNewType: 'char'
			size: aByteArray size.

	aByteArray withIndexDo: [ :each :index | source at: index put: each ].
	
	source autoRelease
]
