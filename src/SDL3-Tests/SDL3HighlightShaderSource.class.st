"
Post-processing shader fragment inspired on https://godotshaders.com/shader/2d-item-highlight-shader/
"
Class {
	#name : 'SDL3HighlightShaderSource',
	#superclass : 'SDL3GPURenderStateDemoShaderSource',
	#category : 'SDL3-Tests-Shaders',
	#package : 'SDL3-Tests',
	#tag : 'Shaders'
}

{ #category : 'accessing' }
SDL3HighlightShaderSource class >> hlslSource [
	<script: 'self generateEmbeddedSourcesFromHLSL'>

	^ '
Texture2D texture : register(t0, space2);
SamplerState textureSampler : register(s0, space2);

cbuffer Context : register(b0, space3)
{
    float time; // Elapsed time in seconds
    float2 resolution; // Viewport width/height in pixels
}

struct PSInput
{
    float4 color : COLOR0;
    float2 uv : TEXCOORD0;
};

// The color that flashes when highlighting the sprite
static const float4 highlight_color = float4(1.0, 1.0, 1.0, 0.5);

// Used to control the time between flashes
static const float frequency = 7.00;

// Speed of each flash
static const float highlight_speed = 3.0;

// strength of wave
static const float intensity = 10.0;

// How much area each flash covers (width)
static const float highlight_width = 15.0;


float4 main(PSInput input) : SV_Target
{
    float4 input_color = texture.Sample(textureSampler, input.uv) * input.color;
    float width = 0.001 * frequency * highlight_width / 2.0;
	
	// can play with + or - sign for each UV
	// to control which direction the highlight moves
	// ex. -UV.x - UV.y makes the highlight go from
	// top left to bottom right
    float value = floor(sin(frequency * ((input.uv.x - input.uv.y) + time * highlight_speed)) + width);
	
	// used to control when to use input color vs highlight color
    float highlight = value > 0.5 ? 1.0 : 0.0;
    float3 new_color = input_color.rgb * (1.0 - highlight) + highlight_color.rgb * highlight;

    return float4(new_color, input_color.a);
}'
]

{ #category : 'accessing' }
SDL3HighlightShaderSource class >> sourceCompiledAsDXIL [
	"This method was generated from #hlslSource"

	^ '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'
]

{ #category : 'accessing' }
SDL3HighlightShaderSource class >> sourceCompiledAsMSL [
	"This method was generated from #hlslSource"

	^ 'I2luY2x1ZGUgPG1ldGFsX3N0ZGxpYj4KI2luY2x1ZGUgPHNpbWQvc2ltZC5oPgoKdXNpbmcgbmFtZXNwYWNlIG1ldGFsOwoKc3RydWN0IHR5cGVfQ29udGV4dAp7CiAgICBmbG9hdCB0aW1lOwogICAgcGFja2VkX2Zsb2F0MiByZXNvbHV0aW9uOwp9OwoKc3RydWN0IG1haW4wX291dAp7CiAgICBmbG9hdDQgb3V0X3Zhcl9TVl9UYXJnZXQgW1tjb2xvcigwKV1dOwp9OwoKc3RydWN0IG1haW4wX2luCnsKICAgIGZsb2F0NCBpbl92YXJfQ09MT1IwIFtbdXNlcihsb2NuMCldXTsKICAgIGZsb2F0MiBpbl92YXJfVEVYQ09PUkQwIFtbdXNlcihsb2NuMSldXTsKfTsKCmZyYWdtZW50IG1haW4wX291dCBtYWluMChtYWluMF9pbiBpbiBbW3N0YWdlX2luXV0sIGNvbnN0YW50IHR5cGVfQ29udGV4dCYgQ29udGV4dCBbW2J1ZmZlcigwKV1dLCB0ZXh0dXJlMmQ8ZmxvYXQ+IF90ZXh0dXJlIFtbdGV4dHVyZSgwKV1dLCBzYW1wbGVyIHRleHR1cmVTYW1wbGVyIFtbc2FtcGxlcigwKV1dKQp7CiAgICBtYWluMF9vdXQgb3V0ID0ge307CiAgICBmbG9hdDQgXzQ1ID0gX3RleHR1cmUuc2FtcGxlKHRleHR1cmVTYW1wbGVyLCBpbi5pbl92YXJfVEVYQ09PUkQwKSAqIGluLmluX3Zhcl9DT0xPUjA7CiAgICBmbG9hdCBfNjAgPSBmbG9hdChmbG9vcihzaW4oNy4wICogKChpbi5pbl92YXJfVEVYQ09PUkQwLnggLSBpbi5pbl92YXJfVEVYQ09PUkQwLnkpICsgKENvbnRleHQudGltZSAqIDMuMCkpKSArIDAuMDUyNTAwMDAyMDg2MTYyNTY3MTM4NjcxODc1KSA+IDAuNSk7CiAgICBvdXQub3V0X3Zhcl9TVl9UYXJnZXQgPSBmbG9hdDQoKF80NS54eXogKiAoMS4wIC0gXzYwKSkgKyAoZmxvYXQzKDEuMCkgKiBfNjApLCBfNDUudyk7CiAgICByZXR1cm4gb3V0Owp9Cgo='
]

{ #category : 'accessing' }
SDL3HighlightShaderSource class >> sourceCompiledAsSPV [
	"This method was generated from #hlslSource"

	^ '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'
]
