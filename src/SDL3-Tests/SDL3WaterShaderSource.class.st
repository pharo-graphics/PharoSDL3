"
Post-processing fragment shader that creates a smooth, rolling distortion like oil on water. It uses sine waves to shift the image in a rhythmic pattern.

(Created with help of Gemini)
"
Class {
	#name : 'SDL3WaterShaderSource',
	#superclass : 'SDL3GPURenderStateDemoShaderSource',
	#category : 'SDL3-Tests-Shaders',
	#package : 'SDL3-Tests',
	#tag : 'Shaders'
}

{ #category : 'accessing' }
SDL3WaterShaderSource class >> hlslSource [
	<script: 'self generateEmbeddedSourcesFromHLSL'>

	^ '
Texture2D texture : register(t0, space2);
SamplerState textureSampler : register(s0, space2);

cbuffer Params : register(b0, space3)
{
    float Time;
    float2 Resolution; 
}

static const float Strength = 0.01; // 0.01 for subtle, 0.5 for crazy

struct PSInput
{
    float4 color : COLOR0;
    float2 uv : TEXCOORD0;
};

float4 main(PSInput input) : SV_Target
{
    float2 p = input.uv;
    
    // Create two sine waves moving in different directions
    float x = sin(p.y * 4.0 + Time) * cos(p.x * 10.0 + Time * 0.5);
    float y = sin(p.x * 4.0 + Time) * cos(p.y * 10.0 + Time * 0.3);
    
    // Apply the wave as an offset to the UVs
    float2 offset = float2(x, y) * Strength;
    
    // Sample the texture with the distorted coordinates
    float4 color = texture.Sample(textureSampler, p + offset);

    return float4(color.rgb, 1.0) * input.color;
}
'
]

{ #category : 'accessing' }
SDL3WaterShaderSource class >> sourceCompiledAsDXIL [
	"This method was generated from #hlslSource"

	^ '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' base64Decoded
]

{ #category : 'accessing' }
SDL3WaterShaderSource class >> sourceCompiledAsMSL [
	"This method was generated from #hlslSource"

	^ 'I2luY2x1ZGUgPG1ldGFsX3N0ZGxpYj4KI2luY2x1ZGUgPHNpbWQvc2ltZC5oPgoKdXNpbmcgbmFtZXNwYWNlIG1ldGFsOwoKc3RydWN0IHR5cGVfUGFyYW1zCnsKICAgIGZsb2F0IFRpbWU7CiAgICBwYWNrZWRfZmxvYXQyIFJlc29sdXRpb247Cn07CgpzdHJ1Y3QgbWFpbjBfb3V0CnsKICAgIGZsb2F0NCBvdXRfdmFyX1NWX1RhcmdldCBbW2NvbG9yKDApXV07Cn07CgpzdHJ1Y3QgbWFpbjBfaW4KewogICAgZmxvYXQ0IGluX3Zhcl9DT0xPUjAgW1t1c2VyKGxvY24wKV1dOwogICAgZmxvYXQyIGluX3Zhcl9URVhDT09SRDAgW1t1c2VyKGxvY24xKV1dOwp9OwoKZnJhZ21lbnQgbWFpbjBfb3V0IG1haW4wKG1haW4wX2luIGluIFtbc3RhZ2VfaW5dXSwgY29uc3RhbnQgdHlwZV9QYXJhbXMmIFBhcmFtcyBbW2J1ZmZlcigwKV1dLCB0ZXh0dXJlMmQ8ZmxvYXQ+IF90ZXh0dXJlIFtbdGV4dHVyZSgwKV1dLCBzYW1wbGVyIHRleHR1cmVTYW1wbGVyIFtbc2FtcGxlcigwKV1dKQp7CiAgICBtYWluMF9vdXQgb3V0ID0ge307CiAgICBvdXQub3V0X3Zhcl9TVl9UYXJnZXQgPSBmbG9hdDQoX3RleHR1cmUuc2FtcGxlKHRleHR1cmVTYW1wbGVyLCAoaW4uaW5fdmFyX1RFWENPT1JEMCArIChmbG9hdDIoc2luKChpbi5pbl92YXJfVEVYQ09PUkQwLnkgKiA0LjApICsgUGFyYW1zLlRpbWUpICogY29zKChpbi5pbl92YXJfVEVYQ09PUkQwLnggKiAxMC4wKSArIChQYXJhbXMuVGltZSAqIDAuNSkpLCBzaW4oKGluLmluX3Zhcl9URVhDT09SRDAueCAqIDQuMCkgKyBQYXJhbXMuVGltZSkgKiBjb3MoKGluLmluX3Zhcl9URVhDT09SRDAueSAqIDEwLjApICsgKFBhcmFtcy5UaW1lICogMC4zMDAwMDAwMTE5MjA5Mjg5NTUwNzgxMjUpKSkgKiAwLjAwOTk5OTk5OTc3NjQ4MjU4MjA5MjI4NTE1NjI1KSkpLnh5eiwgMS4wKSAqIGluLmluX3Zhcl9DT0xPUjA7CiAgICByZXR1cm4gb3V0Owp9Cgo=' base64Decoded
]

{ #category : 'accessing' }
SDL3WaterShaderSource class >> sourceCompiledAsSPV [
	"This method was generated from #hlslSource"

	^ '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' base64Decoded
]
